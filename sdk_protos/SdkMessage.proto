syntax = "proto3";

package sdk.protos;

option csharp_namespace = "";  //C#不用命名空间

enum EStateCode {
	// TODO：编码统一分段
	CODE_DEFAULT 			= 0;
	CODE_SUCCESS 			= 200;//成功
	CODE_GAME_NONE          = 100;//游戏AppID不存在
	CODE_CHANNEL_NONE       = 101;//游戏ChannelID不存在
	CODE_EMAIL_NOT_EXIST    = 102;//邮箱不存在
	CODE_SDK_AUTH_FAILED    = 103;//第三方远程
	CODE_AUTH_FAILED        = 104;//
	CODE_USER_NONE          = 105;//用戶不存在
	CODE_VERIFY_FAILED      = 106;//校验失败
	CODE_TOKEN_ERROR        = 107;//Token错误
	CODE_MONEY_ERROR        = 108;//
	CODE_ORDER_ERROR        = 109;//
	CODE_SIGN_ERROR         = 110;//请求签名错误
	CODE_PAY_CLOSED         = 111;//充值未开放
	CODE_CHANNEL_NOT_MATCH  = 112;//渠道和游戏不匹配
	CODE_DEVICE_ID_NONE     = 113;//
	CODE_PASSWORD_TOO_SHORT    = 114;//密码最少6位
	CODE_INVALID_PASSWORD   = 115;//密码不正确
	CODE_PARAM_MISS         = 116;//参数缺失
	CODE_ERR_CP_CONN        = 117;//CP服务器连接失败
	CODE_ERR_CP_REQUEST     = 118;//CP远程请求错误
	CODE_ERR_CP_AUTH        = 119;//SDK验证失败
	CODE_VERIFY_CODE_NOT_MATCH = 120;//验证码错误
	CODE_ERR_ACTIVE_CODE    = 121;//激活码错误
	CODE_ACTIVE_CODE_USED   = 122;//激活码已经被使用
	CODE_ERR_EXT_FORMAT     = 123;//扩展消息（Extension）格式错误
	CODE_ERR_SEND_SMS       = 124;//后台发送短信失败
	CODE_PHONE_ACTIVED      = 125;//手机号已激活
	CODE_SERVICE_BUSY       = 126;//服务器繁忙（内部逻辑错误）
	CODE_ACCOUNT_BANED      = 127;//账号已被封禁
	CODE_TOKEN_EXPIRED      = 128;//令牌已过期
	CODE_MOBILE_ERROR       = 129;//手机号错误
	CODE_NEED_SMS_VERIFY    = 130;//需要短信验证
	CODE_EMAIL_SEND_TOO_FAST    = 131;//邮件发送间隔太短
	CODE_SDK_USER_OVER_LIMIT    = 132;//SDK用户数量超出
	CODE_USDK_USER_MISMATCH    = 133;//USDK用户与激活码不匹配
	CODE_CUID_TOO_LONG    = 134;//USDK CUID超出长度	
	CODE_CREATE_VISTOR_ACCOUNT_ERROR = 135;//创建游客账号失败
	CODE_EMAIL_IS_EXISTS = 136;//邮箱账号已存在
	CODE_EMAIL_FORMAT_ERROR = 137;//邮箱格式错误
	CODE_AUTH_CODE_ERROR = 138;//验证码错误
	CODE_AUTH_CODE_OVERDUE  = 139;//验证码已失效
    CODE_CREATE_ORDER_FAIL = 140;//建立订单失败
    CODE_ACCOUNT_ERROR        = 141;//账号错误
	CODE_VERIFY_RECEIPT_ERROR        = 142;//收据验证错误
	CODE_ROLE_OFFLINE        = 143;//角色不在线	
	CODE_NO_ORDER			= 144;//没订单
	CODE_ORDER_STATUS_ERR	= 145;//订单状态不对
	CODE_ORDER_GOODS_ERR	= 146;//订单金额不对
	CODE_ERR_REMAIN_ONE_LOGIN_METHOD	= 147;//至少保留一种登录方式
	CODE_ERR_IS_EXIST_SAME_PLATFORM_USER = 148;//已经绑定此平台账号
	CODE_ERR_NETWORK = 149;						//网络连接错误
	CODE_ERR_ONE_SNS_BIND_ONE_ACCOUNT = 150;	//一个SNS账号只能绑定一个灵游坊账号
	CODE_ERR_ACCOUNT_HAS_BINDED_EMAIL = 151;	//账号已绑定邮箱
	CODE_ERR_CONTENT_HAS_SENSITIVE_WORD = 152;	//内容里有敏感词
	CODE_GAME_ID_ERROR = 153;					//游戏ID错误
	CODE_RECHARGE_ITEM_ERROR = 154;				//充值项错误
	CODE_ROLE_NOT_EXIST = 155;					//角色不存在
}

//语言编号
enum Lang {	
	CN      = 0;//中文简体
	TW      = 1;//中文繁体
	EN      = 2;//英文
	JP 		= 3;//日语
	KR 		= 4;//韩语
}

//文本内容类型
enum ContentId {	
	PRIVACY = 0;	//隐私协议
	SERVICE = 1;	//服务条款
}

// 服务器状态
enum ServerStatus {
	REST = 0;			//休息
	SERVEROK = 1;		//流畅
	RECOMMENDED  = 2;	//推荐
	HOT  = 3;			//火爆
	FULL  = 4;			//爆满
	AUTO = -1;		//自定义
}

// 支付平台
enum PayPlatform {
	DEFAULT = 0;
	APPSTORE = 1;			
	GOOGLEPLAY = 2;		
	ONESTORE  = 3;	
	MYCARD  = 5;		
	CODAPAY  = 6;	
	CODASHOP  = 7;	
	PAYPAL  = 8;	
}

// 登录方式
enum LoginType {
	GUEST = 0;
	EMAIL = 1;			
	SNS = 2;		
	QUICK = 3;
}

//SNS账号登录
message HaiwaiSdkLogin {
	EStateCode code = 1;				//错误码
	int64 account_id = 2;				//账号ID
	int32 channel_id = 3;				//渠道ID
	int32 sdk_id = 4;					//SdkId
	string sdk_user_id = 5;				//渠道用户ID
	string sdk_user_name = 6;			//渠道用户名
	string access_token = 7;			//SDK令牌
	string device_id = 8;				//设备ID
	int32 is_white = 9;					//是否白名单
	int32 game_id = 10;					//游戏ID
	int32 token_expired_seconds = 11;	//令牌过期秒数
	bool is_new = 13;					//是否新注册用户
	string region_id = 14;				//国家代码，中国，CN
	int64 lock_time = 15;					//解锁时间
	int32 sdk_cumulative_days_login = 17;	//SDK（账号）累计登陆天数
	int32 sdk_continuous_days_login = 18;	//SDK（账号）连续登陆天数
}

//游客
message Vistor {
    EStateCode code = 1;			//错误码
	string vistor_user_name = 2;	//游客账号
	string vistor_password  = 3;    //游客密码
	string device_id = 4;			//设备ID
	int64 account_id = 5;			//账号ID
	int32 channel_id = 6;			//渠道ID
	string access_token = 7;
	int32 token_expired_seconds = 8; //令牌过期秒数
	int32 game_id = 9;
	string region_id = 10;
	int32 is_white = 11;					//是否白名单
	int64 lock_time = 12;					//解锁时间
	int32 user_login_days = 13;				//累计登录天数,已废弃，保留一个版本
	int32 sdk_cumulative_days_login = 14;	//SDK（账号）累计登陆天数
	int32 sdk_continuous_days_login = 15;	//SDK（账号）连续登陆天数
	bool is_binded = 16;					//是否绑定了邮箱或SNS
}

//邮箱注册登录
message EmailUser {
    EStateCode code = 1;				//错误码
	string email = 2;           		//邮箱
	int32  email_auth_code = 3;       //验证码
	string email_password = 4;        //密码
	int32 channel_id = 5;
	string device_id = 6;
	int64 account_id = 7;
	int32 auth_code_type = 8;		//验证码类型
	string access_token = 9;
	int32 token_expired_seconds = 10; //令牌过期秒数
	Lang lang = 11;						//语言
	int32 game_id = 12;
	string region_id = 13;
	int32 is_white = 14;					//是否白名单
	int64 lock_time = 15;					//解锁时间
	int32 user_login_days = 16;				//累计登录天数
	int32 sdk_cumulative_days_login = 17;	//SDK（账号）累计登陆天数
	int32 sdk_continuous_days_login = 18;	//SDK（账号）连续登陆天数
}

//登录通用返回数据结构体
message LoginResponse {
    EStateCode code = 1;					//错误码
	int64 account_id = 2;
	string region_id = 3;
	int32 sdk_cumulative_days_login = 4;	//SDK（账号）累计登陆天数
	int32 sdk_continuous_days_login = 5;	//SDK（账号）连续登陆天数
	string access_token = 6;
	int32 token_expired_seconds = 7; 		//令牌过期秒数
	int32 is_white = 8;						//是否白名单
	bool is_new = 9;						//是否新SNS用户
	int64 lock_time = 10;					//解锁时间
	bool is_binded = 11;					//是否绑定了邮箱或SNS
	string display_name = 12;				//账号登录后显示的名称
	bool is_first_login = 13;				//是否首次登录
	string login_time = 14;					//登录时间(UTC)"-8"之后发送 "2006-01-02 15:04:05"
	LoginType login_type = 15;				//游客 邮箱 SNS
	string reg_time = 16;					//注册时间，格式同“登录时间”
}

//充值建立订单(SDK客户端)
message CreateRechargeOrder {	
	EStateCode code = 1; //状态码
	int32 game_id = 2; //游戏ID
	int64 account_id = 3; //游戏账号ID
	string role_id = 4; //角色ID
	string product_id = 5; //充值项ID
	float amount = 6; //支付金额(单位分)
	string out_trade_no = 7; //中台订单号
	string attach = 8; //透传数据，原样返回
	string goods_name = 9; //商品名称
	string description = 10; //商品描述
	string sign = 11; //签名验证
	string ip = 12; //客户端IP
    int32 server_id = 13; //服务器ID
    PayPlatform pay_platform = 14; //支付平台 1 Apple App Store 2 Google Play 3 ONE Store 4 PayPal 5 MyCard 6 Coda
	string currency_code = 15; //货币代码 USD美 日元JPY 韩元KRW
	string auth_code = 16; //交易授权码，目前mycard需要	
	int32 shop_id = 17; //商店ID（游戏没有可无视）
	int64 shop_item_id = 18; //商店物品ID（游戏没有可无视）
	string trade_type = 19; //交易模式，MYCARD交易方式私有  1:Android SDK (手遊適用)2:WEB
	string transaction_url = 20; //導頁至 MyCard 交易網址
	string platform_out_trade_no = 21; //支付平台订单号
	string sdk_info = 22;				//数数预置属性
}

//IAP(苹果 谷歌)充值完成收据验证
message VerifyReceipt {	
	EStateCode code = 1; //状态码
	int32 game_id = 2; //游戏ID
	int64 account_id = 3; //游戏账号ID
	string role_id = 4; //角色ID	
	string out_trade_no = 5; //中台订单号
    int32 server_id = 6; //服务器ID
	string receipt = 7; //苹果收据或谷歌令牌,mycard authcode
	string iap_transaction_id = 8; //IAP系统交易单号（谷歌或苹果需要）
	string package_name = 9; //包名 谷歌需要
	string product_id = 10; //商品ID谷歌平台配置的 谷歌需要
	int32 pay_platform = 11; //支付平台 
}

//充值完成回调
message RechargeNotify {	
	int32 code = 1; //状态码
	int32 game_id = 2; //游戏ID
	int64 account_id = 3; //游戏账号ID
	string role_id = 4; //角色ID
	int32 recharge_item_id = 5; //充值项ID
	int32 amount = 6; //支付金额
	string out_trade_no = 7; //中台订单号
	string attach = 8; //透传数据，原样返回
	string sign = 9; //签名验证
    int32 server_id = 10; //服务器ID
	int64 ttp = 11; //当前时间戳
	string currency_code = 12; //货币代码 USD美 日元JPY 韩元KRW
	string iap_transaction_id = 13; //支付平台订单号
	int32 pay_platform = 14; //支付平台 
	string str_amount = 15; //支付金额字符串
}

//已绑定的列表
message BindSdkList {
	EStateCode code = 1;		//错误码
	int64 account_id = 2;		//账号ID
	repeated int32 sdks = 3; 	//已绑定的SDK_ID列表
	string email = 4;			//已绑定的游戏
	int32 game_id = 5; //游戏ID
}

//解绑SDK账号登录方式
message UnbindSdkLogin {
	EStateCode code = 1;				//错误码
	int64 account_id = 2;		//账号ID
	int32 sdk_id = 3;			//SdkId
	string sdk_user_id = 4;		//渠道用户ID
	int32 game_id = 5; //游戏ID
}

message Server {
	int32 server_id = 1;		//服务器ID
	string server_name = 2;		//服务器名称
	string ip_address = 3;		//IP地址
	int32 link_port = 4;		//端口号
	int32 link_count = 5;		//网关数量
	ServerStatus state = 6;		//服务器状态            
	string domain = 7;			//域名
	int32 tag = 8;				//版本TAG	
	string closed_text = 9;		//关服提示
}

message ServerList {
	EStateCode code = 1;			//错误码
	int32 game_id = 2;				//游戏ID
	int32 tag = 3;					//版本TAG
	repeated Server servers = 4; 	//服务器列表
	int64 account_id = 5;			//账号ID
	string region_id = 6;			//国家地区ID
}

message LangContents {
	map<int32, string> contents = 1; //该语言下的所有内容
}

//游戏内文本内容
message Content {
	EStateCode code = 1;		//错误码
	int32 game_id = 2;			//游戏ID	
	map<int32, LangContents> lang_contents_map = 3;
}

//公告
message Notice {
	string title = 1;		//标题
	string content = 2;		//内容
}

message NoticeList {
	EStateCode code = 1;			//错误码
	int32 game_id = 2;				//游戏ID
	Lang lang = 3;					//语言
	repeated Notice notices = 4; 	//服务器列表
}

// 渠道信息
message PBChannel {
	uint32 channel_id		= 1; //自定义渠道ID
	string app_url			= 2;//更新包下载地址
}

message Sns {
	int32 id = 1;
	string name = 2;
	bool enable = 3;
}

//系统配置
message GlobalInitData {
	EStateCode code = 1;	//错误码
	int32 game_id = 2;
	int32 channel_id = 3;
	repeated Sns snses = 4;	//社交登录方式
	bool guest_enable = 5;	//游客开启，true开启
	bool email_enable = 6;	//邮箱登录开启
	bool channel_recharge_enable = 7;	//渠道充值开启
	bool reg_enable = 8;	//注册按钮开启
	bool gift_code_enable = 9;	//礼包码入口开启
}

//外挂上报
// message Cheater {	
// 	EStateCode code = 1; //状态码
// 	int32 game_id = 2; //游戏ID
// 	int64 account_id = 3; //游戏账号ID
// 	string role_id = 4; //角色ID	
// }

//激活码登录
message ActiveCodeLogin {
    EStateCode code = 1;			//错误码
	string active_code = 2;			//游客账号
	int64 account_id = 3;			//账号ID
	int32 channel_id = 4;			//渠道ID
	string access_token = 5;
	int32 token_expired_seconds = 6; //令牌过期秒数
	int32 game_id = 7;
	string region_id = 8;
	int32 is_white = 9;					//是否白名单
}

//敏感词替换
message WordCheck {
    EStateCode code = 1;			//错误码
	string word = 2;				//待检词语
	string replace_text = 3;		//替换后的文本
	bool has_sensitive_word = 4;	//是否包含敏感词
}

// 登录方式
enum PSLoginStatus {
	REG_SUCCESS = 0;
	LOGIN_SUCCESS = 1;			
	NEED_CONFIRM_EMAIL = 2;		
}

//PS账号登录
message PSLogin {
	EStateCode code = 1;				//错误码
	int64 account_id = 2;				//账号ID
	int64 ps_user_id = 3;				//PSN账号ID	
	int32 game_id = 4; 					//游戏ID
	PSLoginStatus status = 5;			//登录状态 0新账号注册成功 1老账号登录成功 2新账号需要确认是否绑定邮箱
	bool skipping_bind_email = 6;		//是否跳过邮箱绑定 true跳过 false不跳过
}